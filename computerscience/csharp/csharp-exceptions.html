<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>C# Exceptions - Interactive Lesson</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      margin: 2rem;
      background-color: #f1f1f1;
      color: #333;
    }

    h1, h2 {
      color: #4caf50;
    }

    textarea {
      width: 100%;
      height: 300px;
      font-family: Consolas, monospace;
      background: #111;
      color: #fff;
      padding: 1rem;
      border: none;
      border-radius: 8px;
      resize: vertical;
    }

    button {
      margin-top: 1rem;
      padding: 0.6rem 1.2rem;
      background-color: #4caf50;
      color: white;
      border: none;
      font-size: 1rem;
      border-radius: 6px;
      cursor: pointer;
    }

    button:hover {
      background-color: #388e3c;
    }

    .output {
      margin-top: 1rem;
      background: #222;
      color: #0f0;
      padding: 1rem;
      border-radius: 8px;
      white-space: pre-wrap;
      min-height: 100px;
    }

    .tip {
      background-color: #e8f5e9;
      padding: 0.5rem 1rem;
      border-left: 5px solid #4caf50;
      margin: 1rem 0;
    }

    code {
      background: #e0e0e0;
      padding: 2px 4px;
      border-radius: 4px;
    }

    ul {
      background: #f9f9f9;
      padding: 1rem;
      border-radius: 10px;
    }

    .quiz-section {
      margin-top: 40px;
    }

    .quiz-section input[type="radio"] {
      margin-right: 10px;
    }

    .result {
      font-size: 18px;
      font-weight: bold;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h1>üß® C# Exceptions - Interactive Lesson</h1>
  <p>Learn how to handle errors in C# using try-catch-finally blocks. You will simulate exception handling, explore common exception types, and test your knowledge with a quiz!</p>

  <h2>üìö Example Code: Try-Catch Block</h2>
  <textarea id="exceptionCode">
try {
    int result = 10 / 0;
} catch (DivideByZeroException ex) {
    Console.WriteLine("Error: " + ex.Message);
} finally {
    Console.WriteLine("This will always run.");
}
  </textarea>
  <button onclick="simulateExceptionHandling()">‚ñ∂Ô∏è Run</button>

  <div class="output" id="exceptionOutput">Console output will appear here...</div>

  <script>
    function simulateExceptionHandling() {
      const code = document.getElementById("exceptionCode").value;
      const output = document.getElementById("exceptionOutput");

      if (code.includes("10 / 0")) {
        output.innerText = "Error: Attempted to divide by zero.\nThis will always run.";
      } else {
        output.innerText = "[Simulated Output] No division by zero detected.";
      }
    }
  </script>

  <div class="tip">
    <strong>üí° Tip:</strong> Always wrap risky code (like file access or division) inside a <code>try-catch</code> to handle unexpected errors gracefully.
  </div>

  <h2>üîç Common C# Exceptions</h2>
  <ul>
    <li><strong>DivideByZeroException</strong>: Dividing a number by zero.</li>
    <li><strong>NullReferenceException</strong>: Accessing a null object.</li>
    <li><strong>FileNotFoundException</strong>: Trying to open a missing file.</li>
    <li><strong>IndexOutOfRangeException</strong>: Using an invalid array index.</li>
  </ul>

  <h2>üß™ Simulate Different Exceptions</h2>
  <button onclick="simulateNullReference()">Simulate NullReferenceException</button>
  <button onclick="simulateFileNotFound()">Simulate FileNotFoundException</button>

  <div class="output" id="demoOutput">Simulation output will appear here...</div>

  <script>
    function simulateNullReference() {
      document.getElementById("demoOutput").innerText = "Caught an exception: NullReferenceException - Object reference not set to an instance of an object.";
    }

    function simulateFileNotFound() {
      document.getElementById("demoOutput").innerText = "Caught an exception: FileNotFoundException - Could not find the specified file.";
    }
  </script>

  <h2>üìù Quiz: Test Your C# Exception Handling Knowledge</h2>
  <div class="quiz-section">
    <div class="question">
      <p><strong>1. What is the purpose of the <code>try-catch</code> block in C#?</strong></p>
      <label><input type="radio" name="q1" value="correct"> To handle exceptions during program execution.</label><br>
      <label><input type="radio" name="q1" value="incorrect"> To make code run faster.</label><br>
    </div>

    <div class="question">
      <p><strong>2. What does the <code>finally</code> block do?</strong></p>
      <label><input type="radio" name="q2" value="correct"> It always executes after try-catch, no matter what.</label><br>
      <label><input type="radio" name="q2" value="incorrect"> It runs only when no error happens.</label><br>
    </div>

    <div class="question">
      <p><strong>3. What happens when you divide by zero in C#?</strong></p>
      <label><input type="radio" name="q3" value="correct"> It throws a DivideByZeroException.</label><br>
      <label><input type="radio" name="q3" value="incorrect"> It returns NaN.</label><br>
    </div>

    <div class="question">
      <p><strong>4. Which exception is thrown when accessing a null object?</strong></p>
      <label><input type="radio" name="q4" value="correct"> NullReferenceException</label><br>
      <label><input type="radio" name="q4" value="incorrect"> FileNotFoundException</label><br>
    </div>

    <div class="question">
      <p><strong>5. Which is a common C# exception?</strong></p>
      <label><input type="radio" name="q5" value="correct"> DivideByZeroException</label><br>
      <label><input type="radio" name="q5" value="incorrect"> TimeOutException</label><br>
    </div>

    <button onclick="checkQuiz()">Submit Quiz</button>
    <div class="result" id="quizResult"></div>
  </div>

  <script>
    function checkQuiz() {
      let score = 0;
      const total = 5;

      for (let i = 1; i <= total; i++) {
        const q = document.querySelector(`input[name='q${i}']:checked`);
        if (q && q.value === 'correct') score++;
      }

      const result = document.getElementById("quizResult");
      if (score === total) {
        result.textContent = "üéâ Perfect! You got all questions right.";
        result.style.color = "green";
      } else if (score >= total / 2) {
        result.textContent = `üëç Good! You scored ${score}/${total}.`;
        result.style.color = "orange";
      } else {
        result.textContent = `üòï You scored ${score}/${total}. Review the lesson and try again!`;
        result.style.color = "red";
      }
    }
  </script>

</body>
</html>
