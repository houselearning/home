<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Kindergarten — Counting 11 to 20</title>
<style>
:root{
  --bg:#fff5f7; --panel:#fff; --accent:#f472b6; --accent2:#9d174d; --ok:#16a34a; --bad:#ef4444; --muted:#566270;
}
*{box-sizing:border-box}
body{margin:0;font-family:Inter, "Segoe UI", Arial, sans-serif;background:var(--bg);color:#581c87;}
header{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#fff;padding:22px 12px;text-align:center}
header h1{margin:0;font-size:clamp(20px,3vw,30px)}
main{max-width:1100px;margin:20px auto;padding:14px}
section{background:var(--panel);border-radius:12px;padding:16px;margin:14px 0;box-shadow:0 8px 24px rgba(2,6,23,0.06)}
h2{color:var(--accent2);margin:0 0 10px 0}
p{margin:8px 0;font-size:1.1rem;}
.controls{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
button{background:var(--accent2);color:#fff;border:none;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:700}
button.secondary{background:#f472b6;color:#fff}
button.ghost{background:#fce7f3;color:var(--accent2);border:1px solid #f9a8d4}
button.warn{background:#f97316}
input[type=number], input[type=text], select{padding:8px;border-radius:8px;border:1px solid #f9a8d4;font-size:1rem}
.grid{display:grid;gap:10px}
.grid.cols-4{grid-template-columns:repeat(4,1fr)}
.tile{background:#fff;padding:12px;border-radius:8px;text-align:center;border:1px solid #f9a8d4;cursor:pointer;font-weight:700}
.status{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.pill{background:#dcfce7;color:var(--ok);padding:6px 10px;border-radius:999px;font-weight:800}
.muted{color:var(--muted)}
footer{text-align:center;padding:12px;margin-top:8px;color:#525252}
.answer{font-weight:800;margin-top:8px}
.ok{color:var(--ok)}
.bad{color:var(--bad)}
canvas{background:#fff;border:1px solid #f9a8d4;border-radius:8px;display:block;margin-top:10px;}
</style>
</head>
<body>
<header>
<h1>Kindergarten — Counting 11 to 20</h1>
<p style="margin:6px 0 0 0;opacity:.95">Interactive practice • video tutorial • speed quiz</p>
</header>

<main>
<section aria-labelledby="introTitle">
<h2 id="introTitle">Counting Past 10! 🔢</h2>
<p>You are a fantastic counter! You know how to count all the way to 10. Now, let's learn to count even higher, all the way to 20! We'll start at 11 and keep going. ✨</p>
<div class="status" style="margin-top:8px">
  <div class="pill" id="score">Score: 0</div>
  <div class="muted" id="streak">Streak: 0</div>
</div>
</section>

<section aria-labelledby="videoTitle">
<h2 id="videoTitle">Video: The "Teen" Numbers</h2>
<p>Watch this video to learn the names for the numbers from 11 to 20. Count along with the narrator! 🎥</p>
<div class="canvas-wrapper">
  <canvas id="tutorialCanvas" width="800" height="400"></canvas>
</div>
<div class="controls">
  <button id="playTutorial" class="secondary">▶️ Play Video</button>
</div>
<div class="settings">
  <label>Speed: <input type="number" id="videoSpeed" value="1" min="0.5" max="2" step="0.1"></label>
</div>
</section>

<section aria-labelledby="practiceTitle">
<h2 id="practiceTitle">Let's Practice!</h2>
<p>Look at the pictures and count how many you see. Type the number in the box. 👀</p>
<div class="grid cols-4" style="margin-top:10px">
  <div class="tile">
    <div style="font-weight:700">1) How many cats? 🐱</div>
    <div id="q1Image" style="font-size:2rem; margin:10px 0;">🐱🐱🐱🐱🐱<br>🐱🐱🐱🐱🐱<br>🐱🐱</div>
    <input id="q1" type="text" placeholder="e.g. 12">
    <div style="margin-top:6px"><button onclick="check('q1','12')">Check</button></div>
    <div id="r1" class="answer"></div>
  </div>
  <div class="tile">
    <div style="font-weight:700">2) How many balloons? 🎈</div>
    <div id="q2Image" style="font-size:2rem; margin:10px 0;">🎈🎈🎈🎈🎈<br>🎈🎈🎈🎈🎈<br>🎈🎈🎈🎈🎈🎈</div>
    <input id="q2" type="text" placeholder="e.g. 16">
    <div style="margin-top:6px"><button onclick="check('q2','16')">Check</button></div>
    <div id="r2" class="answer"></div>
  </div>
  <div class="tile">
    <div style="font-weight:700">3) How many ducks? 🦆</div>
    <div id="q3Image" style="font-size:2rem; margin:10px 0;">🦆🦆🦆🦆🦆<br>🦆🦆🦆🦆🦆<br>🦆🦆🦆🦆🦆<br>🦆🦆🦆</div>
    <input id="q3" type="text" placeholder="e.g. 18">
    <div style="margin-top:6px"><button onclick="check('q3','18')">Check</button></div>
    <div id="r3" class="answer"></div>
  </div>
  <div class="tile">
    <div style="font-weight:700">4) How many stars? ⭐</div>
    <div id="q4Image" style="font-size:2rem; margin:10px 0;">⭐⭐⭐⭐⭐<br>⭐⭐⭐⭐⭐<br>⭐⭐⭐⭐⭐⭐⭐</div>
    <input id="q4" type="text" placeholder="e.g. 17">
    <div style="margin-top:6px"><button onclick="check('q4','17')">Check</button></div>
    <div id="r4" class="answer"></div>
  </div>
</div>
</section>

<section aria-labelledby="speedTitle">
<h2 id="speedTitle">⚡ Speedy Counting!</h2>
<p>Count the animals as fast as you can. Type the number and hit Submit!</p>
<div class="controls">
  <label>Duration:
    <select id="quizDuration">
      <option value="30">30s</option>
      <option value="60" selected>60s</option>
      <option value="90">90s</option>
    </select>
  </label>
  <button id="startQuiz" class="warn">Start Quiz</button>
  <button id="stopQuiz" class="ghost">Stop</button>
  <div class="muted" id="quizTimer">Time: 0</div>
  <div id="quizScore" class="pill">Correct: 0</div>
</div>
<div style="margin-top:12px">
  <div style="font-size:2rem;font-weight:800; text-align: center;" id="quizQ">Press Start</div>
  <div style="margin-top:8px" class="controls">
    <input id="quizInput" type="text" placeholder="Count">
    <button id="quizCheck" class="secondary">Submit</button>
    <div id="quizFeedback" class="answer"></div>
  </div>
</div>
</section>

<footer>Keep practicing, and soon you'll be a counting superstar! 🌟</footer>
</main>

<script>
/* ===== Utilities ===== */
const tone=(f=880,d=0.06)=>{try{const A=new (window.AudioContext||window.webkitAudioContext)();const o=A.createOscillator();const g=A.createGain();o.type='sine';o.frequency.value=f;g.gain.value=0.0001;o.connect(g);g.connect(A.destination);o.start();g.gain.exponentialRampToValueAtTime(0.12,A.currentTime+0.01);g.gain.exponentialRampToValueAtTime(0.0001,A.currentTime+d);setTimeout(()=>{o.stop();A.close().catch(()=>{});},d*1000+50);}catch(e){}};
function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

/* ===== Score & CSV ===== */
let totalScore=0, streak=0, csvData=[];
function updateScore(points,q='',a=''){if(points>0){ totalScore+=points; streak++;}else{streak=0;} document.getElementById('score').textContent=`Score: ${totalScore}`; document.getElementById('streak').textContent=`Streak: ${streak}`; if(q&&a)csvData.push([q,a]);}
window.check = (inputId,correct)=>{const val=document.getElementById(inputId).value.trim(); const res=document.getElementById('r'+inputId.replace(/[^\d]/g,'')); if(val===correct){res.textContent='✅ Correct!'; res.className='answer ok'; tone(880,0.06); updateScore(1,document.getElementById(inputId).previousElementSibling.textContent,correct);}else{res.textContent=`❌ Wrong (Answer: ${correct})`; res.className='answer bad'; tone(220,0.06); updateScore(0,document.getElementById(inputId).previousElementSibling.textContent,correct);}}

/* ===== Canvas Tutorial ===== */
const tutorialCanvas = document.getElementById('tutorialCanvas');
const ctx = tutorialCanvas.getContext('2d');
const tutorialSpeedInput = document.getElementById('videoSpeed');
const voice = window.speechSynthesis.getVoices().find(v => v.name.includes('female') || v.name.includes('F')); // Find a female voice

function drawCount(number, count) {
    ctx.clearRect(0, 0, tutorialCanvas.width, tutorialCanvas.height);
    const textX = tutorialCanvas.width / 2;
    const textY = tutorialCanvas.height / 2 - 50;
    
    // Draw the number
    ctx.font = '100px Arial';
    ctx.textAlign = 'center';
    ctx.fillStyle = '#9d174d';
    ctx.fillText(number.toString(), textX, textY);
    
    // Draw circles for counting
    const totalCircles = count;
    const startY = textY + 50;
    const circleRadius = 20;
    const circleSpacing = 50;
    const startX = textX - ((totalCircles - 1) / 2) * circleSpacing;

    for (let i = 0; i < totalCircles; i++) {
        ctx.beginPath();
        ctx.arc(startX + i * circleSpacing, startY, circleRadius, 0, 2 * Math.PI);
        ctx.fillStyle = '#f472b6';
        ctx.fill();
    }
}

const tutorialSteps = [
    { audio: "Now that you can count to ten, let's keep going!", count: 10 },
    { audio: "Eleven. It's ten and one more.", count: 11 },
    { audio: "Twelve. Ten and two more.", count: 12 },
    { audio: "Thirteen. Ten and three more.", count: 13 },
    { audio: "Fourteen. Ten and four more.", count: 14 },
    { audio: "Fifteen. Ten and five more.", count: 15 },
    { audio: "Sixteen. Ten and six more.", count: 16 },
    { audio: "Seventeen. Ten and seven more.", count: 17 },
    { audio: "Eighteen. Ten and eight more.", count: 18 },
    { audio: "Nineteen. Ten and nine more.", count: 19 },
    { audio: "And twenty! That's two groups of ten.", count: 20 },
    { audio: "You did it! Keep practicing to be a super counter!", count: 20 }
];

let tutorialIndex = 0;
function playTutorialVideo(callback) {
  tutorialIndex = 0;
  const speed = parseFloat(tutorialSpeedInput.value) || 1;
  function nextStep() {
    if (tutorialIndex >= tutorialSteps.length) {
      if (callback) callback();
      return;
    }
    const step = tutorialSteps[tutorialIndex];
    drawCount(step.count, step.count);
    const utter = new SpeechSynthesisUtterance(step.audio);
    utter.rate = speed;
    utter.pitch = 1.2;
    utter.volume = 1;
    if(voice) utter.voice = voice;
    utter.onend = () => {
      tutorialIndex++;
      nextStep();
    };
    utter.onerror = () => {
      tutorialIndex++;
      nextStep();
    };
    speechSynthesis.speak(utter);
  }
  nextStep();
}
document.getElementById('playTutorial').addEventListener('click', () => playTutorialVideo());
drawCount(11, 11);

/* ===== Speed Quiz ===== */
const animals = ['🐶', '🐱', '🐰', '🦊', '🐻', '🐼', '🐘', '🦒', '🦓'];
let quizTimerInt = null, quizTime = 0, quizScore = 0, currentQuiz = null;

function generateQuizQuestion() {
    const count = getRandomInt(11, 20);
    const emoji = animals[getRandomInt(0, animals.length - 1)];
    const question = emoji.repeat(count);
    const answer = count.toString();
    return { q: question, a: answer };
}

function newQuizQuestion() {
    currentQuiz = generateQuizQuestion();
    document.getElementById('quizQ').textContent = currentQuiz.q;
    document.getElementById('quizInput').value = '';
    document.getElementById('quizFeedback').textContent = '';
}

document.getElementById('startQuiz').addEventListener('click', () => {
    quizTime = parseInt(document.getElementById('quizDuration').value, 10);
    quizScore = 0;
    document.getElementById('quizScore').textContent = `Correct: ${quizScore}`;
    newQuizQuestion();
    clearInterval(quizTimerInt);
    quizTimerInt = setInterval(() => {
        quizTime--;
        document.getElementById('quizTimer').textContent = `Time: ${quizTime}s`;
        if (quizTime <= 0) {
            clearInterval(quizTimerInt);
            document.getElementById('quizQ').textContent = 'Time Up!';
        }
    }, 1000);
});
document.getElementById('stopQuiz').addEventListener('click', () => {
    clearInterval(quizTimerInt);
});
document.getElementById('quizCheck').addEventListener('click', () => {
    const val = document.getElementById('quizInput').value.trim();
    const f = document.getElementById('quizFeedback');
    if (val === currentQuiz.a) {
        f.textContent = '✅ Correct!';
        f.className = 'answer ok';
        quizScore++;
        document.getElementById('quizScore').textContent = `Correct: ${quizScore}`;
        tone(880, 0.06);
    } else {
        f.textContent = `❌ Wrong (Answer: ${currentQuiz.a})`;
        f.className = 'answer bad';
        tone(220, 0.06);
    }
    if (quizTime > 0) newQuizQuestion();
});
</script>
</body>
</html>
